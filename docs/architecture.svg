<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.0"
   width="361.44284"
   height="419.12201"
   id="svg2"
   sodipodi:version="0.32"
   inkscape:version="0.48.3.1 r9886"
   sodipodi:docname="architecture.svg"
   inkscape:output_extension="org.inkscape.output.svg.inkscape">
  <title
     id="title3260">Rakudo Perl 6 Architecture</title>
  <metadata
     id="metadata106">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title>Rakudo Perl 6 Architecture</dc:title>
        <cc:license
           rdf:resource="http://opensource.org/licenses/artistic-license-2.0" />
        <dc:subject>
          <rdf:Bag>
            <rdf:li>rakudo architecture</rdf:li>
          </rdf:Bag>
        </dc:subject>
        <dc:description />
        <dc:creator>
          <cc:Agent>
            <dc:title>Mortiz Lentz</dc:title>
          </cc:Agent>
        </dc:creator>
        <dc:rights>
          <cc:Agent>
            <dc:title>The Perl Foundation</dc:title>
          </cc:Agent>
        </dc:rights>
        <dc:source>https://raw.github.com/rakudo/rakudo/nom/docs/architecture.svg</dc:source>
        <dc:relation>https://raw.github.com/rakudo/rakudo/nom/docs/architecture.html</dc:relation>
        <dc:language>en-US</dc:language>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <sodipodi:namedview
     inkscape:window-height="776"
     inkscape:window-width="1280"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     guidetolerance="10.0"
     gridtolerance="10.0"
     objecttolerance="10.0"
     borderopacity="1.0"
     bordercolor="#666666"
     pagecolor="#ffffff"
     id="base"
     showgrid="false"
     inkscape:zoom="1.4142136"
     inkscape:cx="238.0254"
     inkscape:cy="213.17704"
     inkscape:window-x="0"
     inkscape:window-y="24"
     inkscape:current-layer="svg2"
     inkscape:window-maximized="1"
     fit-margin-top="5"
     fit-margin-left="5"
     fit-margin-right="5"
     fit-margin-bottom="5"
     showguides="true"
     inkscape:guide-bbox="true" />
  <defs
     id="defs4" />
  <a
     xlink:href="architecture.html#core-setting"
     transform="matrix(0.5,0,0,0.5,17.715316,-37.789196)"
     id="a66"
     target="_top">
    <rect
       width="188.60774"
       height="163.09328"
       x="-16.331774"
       y="165.95183"
       id="rect2569"
       style="fill:#7fff29;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.22373949999999998px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <text
       x="78.422783"
       y="239.86752"
       id="text2571"
       xml:space="preserve"
       style="font-size:26px;font-style:normal;font-weight:normal;text-align:center;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
         x="78.422783"
         y="239.86752"
         id="tspan2573">Core setting</tspan><tspan
         x="78.422783"
         y="272.36749"
         id="tspan2577">(Perl 6)</tspan></text>
  </a>
  <a
     xlink:href="architecture.html#the-world"
     target="_top"
     id="a3082">
    <g
       id="g3075">
      <rect
         style="fill:#fffa68;fill-opacity:1;stroke:none"
         id="rect3083"
         width="47.905518"
         height="153.9113"
         x="308.53729"
         y="44.629929" />
      <g
         id="g3070">
        <a
           id="a3066">
          <text
             xml:space="preserve"
             style="font-size:13.05000019px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
             x="-175.05045"
             y="336.58728"
             id="text3853"
             sodipodi:linespacing="125%"
             transform="matrix(0,-1,1,0,0,0)"><tspan
               sodipodi:role="line"
               id="tspan3855"
               x="-175.05045"
               y="336.58728">The World (NQP)</tspan></text>
        </a>
      </g>
    </g>
  </a>
  <path
     inkscape:connector-curvature="0"
     id="path3281"
     d="m 221.90337,68.662839 -4.85708,5.725256 c 5.79787,4.930575 7.93163,12.893817 5.3733,20.06186 l 7.06271,2.53413 c 3.59927,-10.084597 0.578,-21.384496 -7.57893,-28.321246 z"
     style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#ffbb55;fill-opacity:1;stroke:none;stroke-width:10;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans" />
  <a
     xlink:href="architecture.html#parser"
     transform="matrix(0.5,0,0,0.5,12.2667,-77.083296)"
     target="_top"
     id="a61">
    <desc
       id="desc3046">The Perl 6 source code is transformed in various stages. The first one is the parser stage, which creates a parse tree out of the Perl 6 source code.

The parser stage is implemented in &quot;Not Quite Perl 6&quot; (NQP) and is part of Rakudo and hosted in the Rakudo repository.

</desc>
    <title
       id="title3044">Parser (NQP)</title>
    <path
       style="fill:#72abff;fill-opacity:1;fill-rule:evenodd;stroke:none"
       d="m 221.18207,243.92645 333.35034,0 0,61.61931 -333.35034,0 z"
       id="rect2383"
       inkscape:connector-curvature="0" />
    <text
       x="311.26349"
       y="281.90472"
       id="Parser-text"
       xml:space="preserve"
       style="font-size:24px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
         x="311.26349"
         y="281.90472"
         id="tspan2565"
         style="font-size:24px">Parser (NQP)</tspan></text>
  </a>
  <path
     inkscape:connector-curvature="0"
     id="path3281-5"
     d="m 185.44006,71.736644 c -8.33601,9.945044 -7.96689,24.635909 0.86818,34.140366 l 5.51408,-5.11519 c -6.29714,-6.774233 -6.57497,-17.1033 -0.63354,-24.191558 l -5.74872,-4.833618 z"
     style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#ffbb55;fill-opacity:1;stroke:none;stroke-width:10;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans" />
  <path
     id="path5828"
     d="m 191.78681,68.578408 0.33261,15.000043 -13.16472,-7.225133 12.83211,-7.77491 z"
     style="fill:#ffbb55;fill-rule:evenodd;stroke:#ffbb55;stroke-width:1.5017065pt"
     inkscape:connector-curvature="0"
     inkscape:transform-center-x="2.1774303"
     inkscape:transform-center-y="-0.02913637" />
  <a
     xlink:href="architecture.html#action-methods"
     transform="matrix(0.5,0,0,0.5,12.266679,-97.23971)"
     target="_top"
     id="action-methods">
    <desc
       id="desc3064">The action methods are applied to the parse tree at the same time as the parser builds it. The result of this process is the Abstract Syntax Tree that is sent to the QAST compiler.</desc>
    <title
       id="title3062">Action methods (NQP)</title>
    <path
       style="fill:#72abff;fill-opacity:1;fill-rule:evenodd;stroke:none"
       d="m 221.18207,386.29776 333.35034,0 0,61.6193 -333.35034,0 z"
       id="rect2387"
       inkscape:connector-curvature="0" />
    <text
       x="244.27011"
       y="425.30728"
       id="text2559"
       xml:space="preserve"
       style="font-size:26.11718369px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
         x="244.27011"
         y="425.30728"
         id="tspan2561">Action methods (NQP)</tspan></text>
  </a>
  <path
     id="path5836"
     d="m 224.59991,102.21058 -5.18083,-14.080874 14.79664,2.563577 -9.61581,11.517297 z"
     style="fill:#ffbb55;fill-rule:evenodd;stroke:#ffbb55;stroke-width:1.5017065pt"
     inkscape:connector-curvature="0"
     inkscape:transform-center-x="-0.9144769"
     inkscape:transform-center-y="0.6733995" />
  <a
     xlink:href="architecture.html#pirt-serializer"
     transform="matrix(0.5,0,0,0.5,12.26668,-98.103967)"
     target="_top"
     id="a41">
    <rect
       width="333.35034"
       height="61.619305"
       x="221.18207"
       y="675.17944"
       id="rect2391"
       style="fill:#72abff;fill-opacity:1;fill-rule:evenodd;stroke:none" />
    <text
       x="254.03218"
       y="714.18896"
       id="text2547"
       xml:space="preserve"
       style="font-size:26.11718369px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
         x="254.03218"
         y="714.18896"
         id="tspan2549">PIRT serializer (NQP)</tspan></text>
  </a>
  <a
     xlink:href="architecture.html#qast-compiler"
     transform="matrix(0.5,0,0,0.5,12.26668,-98.091211)"
     target="_top"
     id="a46">
    <rect
       width="333.35034"
       height="61.619305"
       x="221.18207"
       y="531.57733"
       id="rect2389"
       style="fill:#72abff;fill-opacity:1;fill-rule:evenodd;stroke:none" />
    <text
       x="249.47952"
       y="569.59216"
       id="text2551"
       xml:space="preserve"
       style="font-size:26.11718369px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
         x="249.47952"
         y="569.59216"
         id="tspan2553">QAST compiler (NQP)</tspan></text>
  </a>
  <a
     xlink:href="architecture.html#imcc"
     transform="matrix(0.5,0,0,0.5,12.266678,-98.116724)"
     target="_top"
     id="a51">
    <rect
       width="333.35034"
       height="61.619305"
       x="221.18207"
       y="818.78156"
       id="rect2393"
       style="fill:#00ffff;fill-opacity:1;fill-rule:evenodd;stroke:none" />
    <text
       x="330.82791"
       y="858.13879"
       id="text2555"
       xml:space="preserve"
       style="font-size:26.11718369px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
         x="330.82791"
         y="858.13879"
         id="tspan2557">IMCC (C)</tspan></text>
  </a>
  <path
     style="fill:#ffbb55"
     d="m 173.92967,5.2812122 0,17.9062498 -18.5,0.03125 51.6875,19.5625 49.84375,-19.78125 -18.53125,0.03125 0,-17.7499998 -64.5,0 z"
     id="rect2463"
     inkscape:connector-curvature="0" />
  <text
     x="206.18925"
     y="16.676073"
     id="text2473"
     xml:space="preserve"
     style="font-size:12.36547184px;font-style:normal;font-weight:normal;text-align:center;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
       x="206.18925"
       y="16.676073"
       id="tspan2475">Perl 6</tspan><tspan
       x="206.18925"
       y="32.132919"
       id="tspan2483">source</tspan></text>
  <path
     style="fill:#ffbb55"
     d="m 173.92967,128.09875 0,17.9375 -18.5,0.0313 51.6875,19.53125 49.84375,-19.78125 -18.53125,0.0313 0,-17.75 -64.5,0 z"
     id="rect2437"
     inkscape:connector-curvature="0" />
  <text
     x="171.37122"
     y="156.27069"
     transform="scale(1.0498159,0.95254797)"
     id="text2493"
     xml:space="preserve"
     style="font-size:18.04409218px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
       x="171.37122"
       y="156.27069"
       id="tspan2495">QAST</tspan></text>
  <path
     style="fill:#ffbb55"
     d="m 173.92967,199.88707 0,17.90625 -18.5,0.0313 51.6875,19.53125 49.84375,-19.75 -18.53125,0.0313 0,-17.75 -64.5,0 z"
     id="rect2443"
     inkscape:connector-curvature="0" />
  <text
     x="176.26109"
     y="231.39738"
     transform="scale(1.0498159,0.95254797)"
     id="text2501"
     xml:space="preserve"
     style="font-size:18.04409218px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
       x="176.26109"
       y="231.39738"
       id="tspan2503">PIRT</tspan></text>
  <path
     style="fill:#ffbb55"
     d="m 173.92967,271.67537 0,17.9375 -18.5,0.0313 51.6875,19.53125 49.84375,-19.78125 -18.53125,0.0313 0,-17.75 -64.5,0 z"
     id="rect2449"
     inkscape:connector-curvature="0" />
  <text
     x="184.78178"
     y="301.65015"
     transform="scale(1.0306645,0.97024783)"
     id="text2525"
     xml:space="preserve"
     style="font-size:18.37937927px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
       x="184.78178"
       y="301.65015"
       id="tspan2527">PIR</tspan></text>
  <a
     xlink:href="architecture.html#parrot-runtime"
     transform="matrix(0.5,0,0,0.5,12.266687,-98.428182)"
     id="a101"
     target="_top">
    <desc
       id="desc3042">The POST compiler emits PIR, which IMCC transforms into byte code. IMCC is parrot's PIR compiler, written in C and statically linked into parrot. The byte code (PBC) can then be stored to disk, or executed in memory by a so-called run core or run loop, which is in some sense the heart of parrot - or one of the hearts, because there are several different ones available (one for just-in-time compilation (JIT), one for debugging etc.).

There are also some supporting custom types and operations in Rakudo called dynamic PMCs and dynamic ops which are written in C, and helper functions written in other languages (namely NQP and PIR). Those do not show up in the flow chart.</desc>
    <title
       id="title3040">Parrot runtime (C)</title>
    <rect
       width="333.35034"
       height="61.619305"
       x="221.18205"
       y="962.98108"
       id="rect2707"
       style="fill:#00ffff;fill-opacity:1;fill-rule:evenodd;stroke:none" />
    <text
       x="269.92181"
       y="1001.9778"
       id="text2709"
       xml:space="preserve"
       style="font-size:26.11718369px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"><tspan
         x="269.92181"
         y="1001.9778"
         id="tspan2711">Parrot runtime (C)</tspan></text>
  </a>
  <path
     style="fill:#ffbb55"
     d="m 173.92967,343.46366 0,17.90625 -18.5,0.0313 51.6875,19.53125 49.84375,-19.75 -18.5,0.0313 0,-17.75 -64.53125,0 z"
     id="rect2531"
     inkscape:connector-curvature="0" />
  <text
     style="font-size:18.04409218px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
     xml:space="preserve"
     id="text2539"
     transform="scale(1.0498159,0.95254797)"
     y="382.36429"
     x="178.24348"><tspan
       id="tspan2541"
       y="382.36429"
       x="178.24348">PBC</tspan></text>
  <a
     xlink:href="architecture.html#pmc-dynops"
     target="_top"
     id="a3110">
    <g
       id="g3104">
      <rect
         style="fill:#55ff99;fill-opacity:1;stroke:none"
         id="rect3083-4"
         width="47.905518"
         height="103.10033"
         x="308.53732"
         y="311.0217" />
      <text
         xml:space="preserve"
         style="font-size:13.05000019px;font-style:normal;font-weight:normal;text-align:center;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
         x="-362.36795"
         y="327.81937"
         id="text3853-9"
         sodipodi:linespacing="125%"
         transform="matrix(0,-1,1,0,0,0)"><tspan
           sodipodi:role="line"
           id="tspan3855-2"
           x="-362.36795"
           y="327.81937">PMC &amp;</tspan><tspan
           sodipodi:role="line"
           x="-362.36795"
           y="344.13187"
           id="tspan3229">dynops (C)</tspan></text>
    </g>
  </a>
  <path
     style="fill:#ffbb55"
     d="m 304.45517,318.86055 -4.34646,0 -0.008,-4.48275 -7.83783,12.52446 7.89841,12.0777 -0.008,-4.49033 6.86003,0 0,-15.62908 z"
     id="rect2437-7-3-2-2"
     inkscape:connector-curvature="0"
     sodipodi:nodetypes="ccccccccc" />
  <path
     style="fill:#ffbb55"
     d="m 304.45517,390.64887 -4.34646,0 -0.008,-4.48276 -7.83783,12.52447 7.89841,12.07769 -0.008,-4.49033 6.86003,0 0,-15.62907 z"
     id="rect2437-7-3-2-4"
     inkscape:connector-curvature="0"
     sodipodi:nodetypes="ccccccccc" />
  <path
     style="fill:#ff9955"
     d="m 105.27101,64.909756 8.03125,0 0,4.0625 9.34375,-8.6875 -9.34375,-8.6875 0,4.03125 -8.03125,0 z"
     id="rect2652"
     inkscape:connector-curvature="0"
     sodipodi:nodetypes="cccccccc" />
  <path
     style="fill:#ff9955"
     d="m 105.27101,115.93899 8.03125,0 0,4.0625 9.34375,-8.6875 -9.34375,-8.6875 0,4.03125 -8.03125,0 z"
     id="rect2652-6"
     inkscape:connector-curvature="0"
     sodipodi:nodetypes="cccccccc" />
  <g
     id="g6110"
     transform="translate(-2.4649472,0)">
    <g
       transform="translate(0,-2.358656)"
       id="g6056">
      <path
         style="fill:#ff9955"
         d="m 292.81255,58.580862 8.03125,0 0,4.0625 9.34375,-8.6875 -9.34375,-8.6875 0,4.03125 -8.03125,0 z"
         id="rect2652-0"
         inkscape:connector-curvature="0"
         sodipodi:nodetypes="cccccccc" />
      <path
         style="fill:#ff9955"
         d="m 310.18755,75.955963 -8.03125,0 0,4.0625 -9.34375,-8.6875 9.34375,-8.6875 0,4.03125 8.03125,0 z"
         id="rect2652-0-5"
         inkscape:connector-curvature="0"
         sodipodi:nodetypes="cccccccc" />
    </g>
    <g
       transform="translate(0,0.202175)"
       id="g6052">
      <path
         style="fill:#ff9955"
         d="m 292.81255,107.04927 8.03125,0 0,4.0625 9.34375,-8.6875 -9.34375,-8.6875 0,4.03125 -8.03125,0 z"
         id="rect2652-7"
         inkscape:connector-curvature="0"
         sodipodi:nodetypes="cccccccc" />
      <path
         style="fill:#ff9955"
         d="m 310.18755,124.42437 -8.03125,0 0,4.0625 -9.34375,-8.6875 9.34375,-8.6875 0,4.03125 8.03125,0 z"
         id="rect2652-0-9"
         inkscape:connector-curvature="0"
         sodipodi:nodetypes="cccccccc" />
    </g>
    <path
       sodipodi:nodetypes="cccccccc"
       inkscape:connector-curvature="0"
       id="rect2652-0-3"
       d="m 310.18755,187.72728 -8.03125,0 0,4.0625 -9.34375,-8.6875 9.34375,-8.6875 0,4.03125 8.03125,0 z"
       style="fill:#ff9955" />
  </g>
</svg>
